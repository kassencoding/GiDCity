<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Aitax SuperApp</title> 
    <link rel="stylesheet" href="style.css">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>

    <div id="background-layer"></div>
    <div class="cyber-grid"></div>

    <div id="auth-screen" class="auth-overlay" style="display:none;">
        <div class="auth-card">
            <h1>Aitax ID</h1>
            <p>–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤—Å–µ–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏</p>
            <div class="input-group-auth">
                <input type="text" placeholder="–§–ò–û" id="auth-name">
                <input type="tel" placeholder="+7 (___) ___-__-__" id="auth-phone">
                <div class="sms-group" style="display:none;" id="sms-block">
                    <input type="number" placeholder="–ö–æ–¥ –∏–∑ –°–ú–°" id="auth-code">
                </div>
            </div>
            <button class="btn-full" onclick="sendSms()" id="btn-login-action">–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥</button>
            <div class="guest-link" onclick="continueAsGuest()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫–∞–∫ –≥–æ—Å—Ç—å (–¢–æ–ª—å–∫–æ –ª–µ–Ω—Ç–∞)</div>
        </div>
    </div>

    <div class="top-bar">
        <div class="status-row" style="display:flex; justify-content:center; gap:5px; align-items:center; margin-bottom:10px;">
            <span>Karaganda</span> ‚Ä¢ <span>-2¬∞C ‚ùÑÔ∏è</span>
            <ion-icon name="chevron-down-outline"></ion-icon>
        </div>

        <div class="brand-row">
            <div class="logo" style="margin-left: 0; margin-right: auto;">Aitax</div>
            <div class="btn-icon" onclick="toggleSidebar()"><ion-icon name="menu-outline"></ion-icon></div>
        </div>
    </div>

    <div class="sidebar" id="sidebar">
        <div class="m-head">
            <h3>–ü—Ä–æ—Ñ–∏–ª—å</h3>
            <button class="close-m" onclick="toggleSidebar()"><ion-icon name="close"></ion-icon></button>
        </div>
        
        <div class="profile-edit-section">
            <div class="avatar-upload">
                <div class="current-avatar" id="sidebar-avatar"><ion-icon name="person"></ion-icon></div>
                <label for="avatar-input" class="edit-icon"><ion-icon name="camera"></ion-icon></label>
                <input type="file" id="avatar-input" hidden accept="image/*">
            </div>
            <div class="profile-info">
                <div class="p-name" id="profile-name">–ì–æ—Å—Ç—å</div>
                <div class="p-phone" id="profile-phone">+7 ...</div>
            </div>
        </div>

        <div class="divider"></div>

        <div class="set-item" onclick="toggleLanguage()">
            <ion-icon name="language-outline"></ion-icon> 
            <span id="lang-label">–Ø–∑—ã–∫: –†—É—Å—Å–∫–∏–π</span>
        </div>
        <div class="set-item" onclick="toggleTheme()">
            <ion-icon name="color-palette-outline"></ion-icon> 
            –¢–µ–º—ã (–ì—Ä–∞–¥–∏–µ–Ω—Ç)
        </div>
        <div class="set-item">
            <ion-icon name="settings-outline"></ion-icon> 
            –ù–∞—Å—Ç—Ä–æ–π–∫–∏
        </div>
    </div>

    <div id="city-view" class="view custom-scroll">
        <div class="city-tabs-header">
            <button class="c-tab active" onclick="switchCityTab('billboard')">–ê—Ñ–∏—à–∞</button>
            <button class="c-tab" onclick="switchCityTab('map')">–ö–∞—Ä—Ç–∞</button>
        </div>

        <div id="tab-billboard" class="city-content active">
            <div class="ad-feed">
                <div class="ad-card premium">
                    <div class="ad-badge">Promoted</div>
                    <img src="https://placehold.co/600x300/1a1a1a/FFF?text=Concert+Show" class="ad-img">
                    <div class="ad-info">
                        <h3>–ì—Ä–∞–Ω–¥–∏–æ–∑–Ω—ã–π –∫–æ–Ω—Ü–µ—Ä—Ç</h3>
                        <p>–°–∫–∏–¥–∫–∏ 50% –Ω–∞ –±–∏–ª–µ—Ç—ã —Ç–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è!</p>
                    </div>
                </div>
                </div>
        </div>

        <div id="tab-citymap" class="city-content">
            <div id="city-map-container" style="width:100%; height:100%; min-height: 500px;"></div>
        </div>
    </div>

    <div id="home-view" class="view home-view active">
        <div id="map-container"></div>
        
        <div class="map-overlays">
            <div class="map-btn-locate" onclick="centerMap()"><ion-icon name="locate"></ion-icon></div>
        </div>

        <div class="chat-container"></div>

        <div class="order-panel">
            <div class="panel-handle"></div>

            <div class="chat-input-row">
                <div class="input-wrapper improved">
                    <input type="text" placeholder="AI —á–∞—Ç –∏–ª–∏ –∞–¥—Ä–µ—Å..." id="chatInput">
                    <button class="btn-send-inside" onclick="sendMessage()">
                        <ion-icon name="arrow-up"></ion-icon>
                    </button>
                </div>
            </div>

            <div class="address-block">
                <div class="input-line">
                    <ion-icon name="navigate" style="color:var(--accent)"></ion-icon>
                    <div class="addr-text">
                        <div class="lbl">–û—Ç–∫—É–¥–∞</div>
                        <div class="val">–ú–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</div>
                    </div>
                </div>
                <div class="divider-h"></div>
                <div class="input-line">
                    <ion-icon name="location" style="color:#ff4757"></ion-icon>
                    <div class="addr-text">
                        <div class="lbl">–ö—É–¥–∞</div>
                        <input type="text" class="clean-addr-inp" placeholder="–£–∫–∞–∂–∏—Ç–µ —Ç–æ—á–∫—É –ë">
                    </div>
                </div>
            </div>

            <div class="options-row">
                <div class="opt-box" onclick="openModal('comment-modal')">
                    <div class="lbl">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</div>
                    <div>–£–∫–∞–∑–∞—Ç—å...</div>
                </div>
                <div class="opt-box">
                    <div class="lbl">–í—Ä–µ–º—è</div>
                    <div>–°–µ–π—á–∞—Å</div>
                </div>
            </div>

            <div class="tariffs-row custom-scroll-x">
                <div class="tariff selected">–≠–∫–æ–Ω–æ–º</div>
                <div class="tariff">–ö–æ–º—Ñ–æ—Ä—Ç</div>
                <div class="tariff">–ë–∏–∑–Ω–µ—Å</div>
                <div class="tariff pink-taxi" style="color:#ff69b4; border-color:#ff69b4;">Lady üå∏</div>
            </div>

            <button class="btn-go" onclick="startOrder()">–ü–æ–µ—Ö–∞–ª–∏</button>
        </div>
    </div>

    <div id="feed-view" class="view custom-scroll">
        <div class="feed-composer">
            <div class="composer-top">
                <div class="avatar-circle"><ion-icon name="person"></ion-icon></div>
                <div class="composer-placeholder" onclick="openModal('create-post-modal')">–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?</div>
            </div>
        </div>
        
        <div class="feed-stream">
            <div class="post-card">
                <div class="post-head">
                    <div class="avatar-circle" style="width:36px; height:36px;">A</div>
                    <div style="flex:1; margin-left:10px;">
                        <div class="name-row">
                            <span class="name">Admin</span>
                            <span class="verified"><ion-icon name="checkmark-circle"></ion-icon></span>
                        </div>
                    </div>
                    <div class="time">2—á</div>
                    <button class="more-btn"><ion-icon name="ellipsis-horizontal"></ion-icon></button>
                </div>
                
                <div class="post-content">
                    –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Aitax! –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ–±—â–∞—Ç—å—Å—è, –∫–∞–∫ –≤ Threads. üöÄ
                </div>
                
                <div class="post-actions-bar">
                    <button class="act-btn"><ion-icon name="heart-outline"></ion-icon></button>
                    <button class="act-btn" onclick="openComments(1)"><ion-icon name="chatbubble-outline"></ion-icon></button>
                    <button class="act-btn"><ion-icon name="repeat-outline"></ion-icon></button>
                    <button class="act-btn" onclick="sharePost(1)"><ion-icon name="paper-plane-outline"></ion-icon></button>
                </div>
                <div class="likes-count">12 –ª–∞–π–∫–æ–≤</div>
            </div>
        </div>
    </div>

    <div id="wallet-view" class="view custom-scroll">
        <div class="wallet-card">
            <div style="color:rgba(255,255,255,0.7); font-size:13px;">–ë–∞–ª–∞–Ω—Å</div>
            <div class="w-amount">42 500 ‚Ç∏</div>
            
            <div class="w-actions">
                <button onclick="openWalletModal('deposit')">
                    <div class="icon-circle"><ion-icon name="add"></ion-icon></div>
                    <span>–ü–æ–ø–æ–ª–Ω–∏—Ç—å</span>
                </button>
                <button onclick="openWalletModal('transfer')">
                    <div class="icon-circle"><ion-icon name="arrow-forward"></ion-icon></div>
                    <span>–ü–µ—Ä–µ–≤–µ—Å—Ç–∏</span>
                </button>
                <button onclick="openWalletModal('qr')">
                    <div class="icon-circle"><ion-icon name="qr-code"></ion-icon></div>
                    <span>QR</span>
                </button>
            </div>
            
            <div class="bonus-note">
                ‚ö°Ô∏è –ü–æ–ø–æ–ª–Ω—è–π—Ç–µ —Å—á–µ—Ç –∏ –∫–∞—Ç–∞–π—Ç–µ—Å—å —Å–æ —Å–∫–∏–¥–∫–æ–π! –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ QR –≤—ã–≥–æ–¥–Ω–µ–µ.
            </div>
        </div>

        <div class="section-title">–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</div>
        <div class="history-list">
            </div>
    </div>

    <div id="driver-view" class="view custom-scroll">
        <div class="driver-block">
            <div class="driver-avatar-icon"><ion-icon name="person"></ion-icon></div>
            <div class="driver-name">–í–æ–¥–∏—Ç–µ–ª—å</div>
            <div class="car-details">–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤...</div>
        </div>
        <div class="section-title">–≠—Ñ–∏—Ä –∑–∞–∫–∞–∑–æ–≤</div>
        <div class="orders-list">
            <div class="order-strip">
                <div class="route-info">
                    <div style="font-weight:700;">–¶–µ–Ω—Ç—Ä ‚Üí –Æ–≥–æ-–í–æ—Å—Ç–æ–∫</div>
                    <div style="font-size:12px; color:gray; margin-top:4px;">–≠–∫–æ–Ω–æ–º ‚Ä¢ 5.2 –∫–º</div>
                </div>
                <div style="text-align:right;">
                    <div class="price-tag">1800 ‚Ç∏</div>
                    <button class="take-btn-big" onclick="openOrderNegotiation(1)">–í–∑—è—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay hidden" id="comment-modal">
        <div class="modal-card">
            <div class="m-head">
                <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</h3>
                <button class="close-m" onclick="closeModal('comment-modal')"><ion-icon name="close"></ion-icon></button>
            </div>
            <div class="input-group-modal">
                <input type="text" class="modal-inp" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Å —Ä–µ–±–µ–Ω–∫–æ–º, –ø—É—Å—Ç–æ–π –±–∞–≥–∞–∂–Ω–∏–∫...">
            </div>
            <button class="btn-full" onclick="closeModal('comment-modal')">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>

    <div class="modal-overlay hidden" id="order-negotiation-modal">
        <div class="modal-card">
            <div class="m-head">
                <h3>–ó–∞–∫–∞–∑ #123</h3>
                <button class="close-m" onclick="closeModal('order-negotiation-modal')"><ion-icon name="close"></ion-icon></button>
            </div>
            <div class="offer-price-display">1800 ‚Ç∏</div>
            <div class="offer-actions">
                <button class="btn-outline" onclick="offerMyPrice()">–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–≤–æ—é</button>
                <button class="btn-full" onclick="acceptPrice()">–°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay hidden" id="wallet-action-modal">
        <div class="modal-card">
            <div class="m-head">
                <h3 id="wallet-modal-title">–û–ø–µ—Ä–∞—Ü–∏—è</h3>
                <button class="close-m" onclick="closeModal('wallet-action-modal')"><ion-icon name="close"></ion-icon></button>
            </div>
            <div class="qr-placeholder" id="qr-view" style="display:none; text-align:center;">
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=AitaxPayment" style="border-radius:10px;">
                <p>–°–∫–∞–Ω–∏—Ä—É–π—Ç–µ –¥–ª—è –æ–ø–ª–∞—Ç—ã</p>
            </div>
            <div id="wallet-inputs">
                <input type="number" class="modal-inp" placeholder="–°—É–º–º–∞" style="margin-bottom:10px;">
                <button class="btn-full">–í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay hidden" id="thread-view-modal">
        <div class="modal-card full-height">
            <div class="m-head">
                <h3>–û–±—Å—É–∂–¥–µ–Ω–∏–µ</h3>
                <button class="close-m" onclick="closeModal('thread-view-modal')"><ion-icon name="close"></ion-icon></button>
            </div>
            <div class="thread-content custom-scroll">
                <div class="comment-item">
                    <b>User1:</b> –ö—Ä—É—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç!
                </div>
            </div>
            <div class="comment-input-area">
                <input type="text" placeholder="–û—Ç–≤–µ—Ç–∏—Ç—å...">
                <button>–û—Ç–ø.</button>
            </div>
        </div>
    </div>

    <div class="dock-bar">
        <button class="dock-item" onclick="switchTab('city')"><ion-icon name="map-outline"></ion-icon></button>
        
        <button class="dock-item" onclick="switchTab('feed')"><ion-icon name="people-outline"></ion-icon></button>
        
        <div class="ai-button-wrapper">
            <div class="ai-button" onclick="switchTab('home')">Ai</div>
        </div>
        
        <button class="dock-item" onclick="switchTab('wallet')"><ion-icon name="wallet-outline"></ion-icon></button>
        
        <button class="dock-item" onclick="switchTab('driver')"><ion-icon name="car-sport-outline"></ion-icon></button>
    </div>

    <script src="script.js"></script>
</body>
</html>
