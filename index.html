<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Aitax SuperApp</title> 
    <link rel="stylesheet" href="style.css">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>

    <div id="background-layer"></div>
    <div class="cyber-grid"></div>

    <div id="auth-screen" class="auth-overlay" style="display:none;">
        <div class="auth-card glass-modal">
            <h1>Aitax ID</h1>
            <p>–í—Ö–æ–¥ –≤ –µ–¥–∏–Ω—É—é —ç–∫–æ—Å–∏—Å—Ç–µ–º—É</p>
            <div class="input-line-group">
                <input type="text" class="line-input" placeholder="–§–ò–û" id="auth-name">
                <input type="tel" class="line-input" value="+7" id="auth-phone">
                <div class="sms-group" style="display:none;" id="sms-block">
                    <input type="number" class="line-input" placeholder="–ö–æ–¥ –∏–∑ –°–ú–° (1234)" id="auth-code">
                </div>
            </div>
            <button class="btn-full" onclick="sendSms()" id="btn-login-action">–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥</button>
            <div class="guest-link" onclick="continueAsGuest()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫–∞–∫ –≥–æ—Å—Ç—å</div>
        </div>
    </div>

    <div class="top-bar">
        <div class="status-row">
            <span>Karaganda</span> ‚Ä¢ <span>-2¬∞C ‚ùÑÔ∏è</span>
        </div>
        <div class="brand-row">
            <div class="logo">Aitax</div>
            <div class="btn-icon" onclick="openSettings()"><ion-icon name="settings-outline"></ion-icon></div>
        </div>
    </div>

    <div id="settings-view" class="view settings-view">
        <div class="settings-header">
            <button class="back-btn" onclick="closeSettings()"><ion-icon name="chevron-back"></ion-icon> –ù–∞–∑–∞–¥</button>
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
        </div>
        
        <div class="settings-list custom-scroll">
            <div class="set-card" onclick="openSubSetting('profile-edit')">
                <div class="set-icon"><ion-icon name="person-circle-outline"></ion-icon></div>
                <div class="set-info">
                    <div class="set-title">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</div>
                    <div class="set-sub" id="settings-name-preview">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</div>
                </div>
                <ion-icon name="chevron-forward" class="chev"></ion-icon>
            </div>

            <div class="set-card" onclick="toggleLanguage()">
                <div class="set-icon"><ion-icon name="globe-outline"></ion-icon></div>
                <div class="set-info">
                    <div class="set-title">–Ø–∑—ã–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</div>
                    <div class="set-sub" id="lang-label">–†—É—Å—Å–∫–∏–π</div>
                </div>
                <ion-icon name="chevron-forward" class="chev"></ion-icon>
            </div>

            <div class="set-card" onclick="toggleTheme()">
                <div class="set-icon"><ion-icon name="color-palette-outline"></ion-icon></div>
                <div class="set-info">
                    <div class="set-title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</div>
                    <div class="set-sub">–ì—Ä–∞–¥–∏–µ–Ω—Ç / –¢–µ–º–∞</div>
                </div>
                <ion-icon name="chevron-forward" class="chev"></ion-icon>
            </div>

            <div class="set-card" onclick="alert('–ú–æ–¥—É–ª—å —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω')">
                <div class="set-icon"><ion-icon name="megaphone-outline"></ion-icon></div>
                <div class="set-info">
                    <div class="set-title">–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∫–ª–∞–º—É</div>
                    <div class="set-sub">–í –ê—Ñ–∏—à—É –∏ –Ω–∞ –ö–∞—Ä—Ç—É</div>
                </div>
                <ion-icon name="add-circle-outline" class="chev"></ion-icon>
            </div>
        </div>
    </div>

    <div id="profile-edit" class="sub-screen hidden">
        <div class="settings-header">
            <button class="back-btn" onclick="closeSubSetting('profile-edit')"><ion-icon name="chevron-back"></ion-icon> –ù–∞–∑–∞–¥</button>
            <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
        </div>
        <div class="profile-edit-content">
            <div class="avatar-upload-big">
                <div class="current-avatar-big" id="edit-avatar-preview"><ion-icon name="person"></ion-icon></div>
                <label for="avatar-input" class="edit-icon-btn">–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ</label>
                <input type="file" id="avatar-input" hidden accept="image/*">
            </div>
            <div class="input-line-group" style="margin-top:30px;">
                <label class="lbl-thin">–í–∞—à–µ –ò–º—è</label>
                <input type="text" class="line-input" id="edit-name-inp" value="–ì–æ—Å—Ç—å">
                
                <label class="lbl-thin" style="margin-top:20px;">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input type="tel" class="line-input" id="edit-phone-inp" value="+7" readonly style="opacity:0.5">
            </div>
            <button class="btn-full" onclick="saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>

    <div id="city-view" class="view">
        <div class="city-fixed-top">
            <div class="city-tabs-header">
                <button class="c-tab active" onclick="switchCityTab('billboard')">–ê—Ñ–∏—à–∞</button>
                <button class="c-tab" onclick="switchCityTab('map')">–ö–∞—Ä—Ç–∞</button>
            </div>
        </div>

        <div id="tab-billboard" class="city-content active custom-scroll" style="padding-top: 60px;">
            <div class="ad-feed">
                <div class="ad-card">
                    <img src="https://placehold.co/600x350/111/FFF?text=Concert" class="ad-img">
                    <div class="ad-info-overlay">
                        <h3>Rock Fest 2025</h3>
                        <p>–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å—Ç–∞–¥–∏–æ–Ω ‚Ä¢ 24 –º–∞—è</p>
                    </div>
                </div>
                <div class="ad-card">
                    <img src="https://placehold.co/600x350/222/FFF?text=Movie" class="ad-img">
                    <div class="ad-info-overlay">
                        <h3>–ù–æ—á—å –ö–∏–Ω–æ</h3>
                        <p>–°–∞—Ä—ã-–ê—Ä–∫–∞ ‚Ä¢ –í—Å—é –Ω–æ—á—å</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="tab-citymap" class="city-content">
            <div id="city-map-container"></div>
        </div>
    </div>

    <div id="home-view" class="view home-view active">
        <div id="map-container"></div>
        
        <div class="map-overlays">
            <div class="map-btn-locate" onclick="centerMap()"><ion-icon name="navigate"></ion-icon></div>
        </div>

        <div class="order-panel" id="main-panel">
            <div class="panel-handle" onclick="togglePanelState()"></div>

            <div class="chat-input-row">
                <div class="input-wrapper glass-style">
                    <input type="text" placeholder="AI –ø–æ–º–æ—â–Ω–∏–∫ (–∫—É–¥–∞ –µ–¥–µ–º?)" id="chatInput">
                    <button class="btn-send-inside" onclick="sendMessage()">
                        <ion-icon name="arrow-up"></ion-icon>
                    </button>
                </div>
            </div>
            
            <div class="chat-response-area" id="ai-response-area" style="display:none;"></div>

            <div class="address-block">
                <div class="input-line-flex">
                    <ion-icon name="disc" style="color:var(--accent); font-size:12px;"></ion-icon>
                    <div class="addr-col">
                        <div class="lbl-tiny">–û—Ç–∫—É–¥–∞</div>
                        <div class="val-text">–ú–æ—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è</div>
                    </div>
                </div>
                <div class="divider-line"></div>
                <div class="input-line-flex">
                    <ion-icon name="location" style="color:#ff4757; font-size:16px;"></ion-icon>
                    <div class="addr-col">
                        <div class="lbl-tiny">–ö—É–¥–∞</div>
                        <input type="text" class="line-input-addr" placeholder="–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤–≤–æ–¥–∞ –∞–¥—Ä–µ—Å–∞">
                    </div>
                </div>
            </div>

            <div class="tariffs-row custom-scroll-x">
                <div class="tariff-card selected" onclick="selectTariff(this)">
                    <div class="t-name">–≠–∫–æ</div>
                    <div class="t-price">~800‚Ç∏</div>
                </div>
                <div class="tariff-card" onclick="selectTariff(this)">
                    <div class="t-name">–ö–æ–º—Ñ–æ—Ä—Ç</div>
                    <div class="t-price">~1200‚Ç∏</div>
                </div>
                <div class="tariff-card" onclick="selectTariff(this)">
                    <div class="t-name">–ë–∏–∑–Ω–µ—Å</div>
                    <div class="t-price">~2500‚Ç∏</div>
                </div>
                <div class="tariff-card pink" onclick="selectTariff(this)">
                    <div class="t-name">Lady üå∏</div>
                    <div class="t-price">~1100‚Ç∏</div>
                </div>
            </div>

            <div class="options-row">
                <div class="opt-btn" onclick="openModal('comment-modal')">
                    <ion-icon name="chatbox-ellipses-outline"></ion-icon> –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
                </div>
                <div class="opt-btn">
                    <ion-icon name="time-outline"></ion-icon> –°–µ–π—á–∞—Å
                </div>
            </div>

            <button class="btn-go" onclick="startOrder()">–ó–∞–∫–∞–∑–∞—Ç—å</button>
        </div>
    </div>

    <div id="feed-view" class="view custom-scroll">
        <div class="feed-filters custom-scroll-x">
            <button class="filter-chip active">–í—Å—ë</button>
            <button class="filter-chip">–ö–∞—Ä–∞–≥–∞–Ω–¥–∞</button>
            <button class="filter-chip">–ê—Å—Ç–∞–Ω–∞</button>
            <button class="filter-chip">–ê–ª–º–∞—Ç—ã</button>
        </div>

        <div class="feed-composer-bar" onclick="openModal('create-post-modal')">
            <div class="avatar-mini"><ion-icon name="person"></ion-icon></div>
            <div class="composer-fake-input">–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?</div>
            <ion-icon name="image-outline" style="opacity:0.6"></ion-icon>
        </div>
        
        <div class="feed-stream" id="feed-stream">
            <div class="post-card">
                <div class="post-head">
                    <div class="avatar-mini">A</div>
                    <div class="ph-info">
                        <span class="ph-name">Admin</span>
                        <span class="ph-time">2—á –Ω–∞–∑–∞–¥</span>
                    </div>
                    <button class="icon-btn-text text-danger" onclick="deletePost(this)">
                        <ion-icon name="trash-outline"></ion-icon>
                    </button>
                </div>
                <div class="post-text">
                    –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤ Aitax! –¢–µ–ø–µ—Ä—å –∑–¥–µ—Å—å –µ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –≥–æ—Ä–æ–¥–æ–≤. üèôÔ∏è
                </div>
                <div class="post-actions">
                    <button class="act-item" onclick="toggleLike(this)">
                        <ion-icon name="heart-outline"></ion-icon> <span class="count">12</span>
                    </button>
                    <button class="act-item" onclick="openComments(1)">
                        <ion-icon name="chatbubble-outline"></ion-icon> <span class="count">4</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="wallet-view" class="view custom-scroll">
        <div class="wallet-glass-card">
            <span class="lbl-w">–ë–∞–ª–∞–Ω—Å</span>
            <div class="w-total">42 500 ‚Ç∏</div>
            
            <div class="wallet-big-buttons">
                <div class="wb-btn" onclick="openWalletModal('deposit')">
                    <div class="wb-icon"><ion-icon name="add"></ion-icon></div>
                    <span>–ü–æ–ø–æ–ª–Ω–∏—Ç—å</span>
                </div>
                <div class="wb-btn" onclick="openWalletModal('transfer')">
                    <div class="wb-icon"><ion-icon name="arrow-forward"></ion-icon></div>
                    <span>–ü–µ—Ä–µ–≤–µ—Å—Ç–∏</span>
                </div>
            </div>
        </div>
        
        <h3 class="sect-h">–ò—Å—Ç–æ—Ä–∏—è</h3>
        <div class="history-list">
            <div class="h-item">
                <div class="h-icon"><ion-icon name="car"></ion-icon></div>
                <div class="h-info">–ü–æ–µ–∑–¥–∫–∞<br><span>–í—á–µ—Ä–∞, 12:30</span></div>
                <div class="h-sum">-1200 ‚Ç∏</div>
            </div>
        </div>
    </div>

    <div class="modal-overlay hidden" id="create-post-modal">
        <div class="modal-card glass-modal">
            <div class="m-head-clean">
                <button onclick="closeModal('create-post-modal')">–û—Ç–º–µ–Ω–∞</button>
                <h3>–ù–æ–≤—ã–π –ø–æ—Å—Ç</h3>
                <button class="text-accent" onclick="publishPost()">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
            </div>
            <div class="post-create-area">
                <textarea class="clean-textarea" id="new-post-text" placeholder="–û —á–µ–º —Ö–æ—Ç–∏—Ç–µ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å?"></textarea>
                <div id="img-preview-area" class="hidden">
                    <img id="img-preview-tag" src="">
                    <button class="del-img" onclick="removeImg()"><ion-icon name="close"></ion-icon></button>
                </div>
            </div>
            <div class="post-attach-bar">
                <label for="post-img-input" class="attach-btn"><ion-icon name="image"></ion-icon> –§–æ—Ç–æ/–í–∏–¥–µ–æ</label>
                <input type="file" id="post-img-input" hidden accept="image/*">
            </div>
        </div>
    </div>

    <div class="modal-overlay hidden" id="comment-modal">
        <div class="modal-card glass-modal">
            <h3>–ü–æ–∂–µ–ª–∞–Ω–∏—è</h3>
            <div class="input-line-group">
                <input type="text" class="line-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Å —Ä–µ–±–µ–Ω–∫–æ–º, –ø—É—Å—Ç–æ–π –±–∞–≥–∞–∂–Ω–∏–∫...">
            </div>
            <button class="btn-full" onclick="closeModal('comment-modal')">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>

    <div class="modal-overlay hidden" id="order-negotiation-modal">
        <div class="modal-card glass-modal">
            <div class="m-head-clean">
                 <h3>–ó–∞–∫–∞–∑ #842</h3>
                 <button onclick="closeModal('order-negotiation-modal')"><ion-icon name="close"></ion-icon></button>
            </div>
            <div class="offer-price-display">1800 ‚Ç∏</div>
            <div class="offer-actions">
                <button class="btn-outline" onclick="offerMyPrice()">–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–≤–æ—é</button>
                <button class="btn-full" onclick="acceptPrice()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</button>
            </div>
        </div>
    </div>

    <div class="dock-bar">
        <button class="dock-item" onclick="switchTab('city')"><ion-icon name="map-outline"></ion-icon></button>
        <button class="dock-item" onclick="switchTab('feed')"><ion-icon name="people-outline"></ion-icon></button>
        <div class="ai-button-wrapper">
            <div class="ai-button" onclick="switchTab('home')">Ai</div>
        </div>
        <button class="dock-item" onclick="switchTab('wallet')"><ion-icon name="wallet-outline"></ion-icon></button>
        <button class="dock-item" onclick="alert('–ö–∞–±–∏–Ω–µ—Ç –≤–æ–¥–∏—Ç–µ–ª—è')"><ion-icon name="car-sport-outline"></ion-icon></button>
    </div>

    <script src="script.js"></script>
</body>
</html>
